// Official Discord badge SVG content - Updated to match Discord's current design
export const discordBadges = {
  staff: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 2.5c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm4.5 9.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-9 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" fill="#5865F2"/>
  </svg>`,
  
  partner: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L10.04 5.06L16 6.05L12.24 10.24L13.52 16L8 13.26L2.48 16L3.76 10.24L0 6.05L5.96 5.06L8 0Z" fill="#4f46e5"/>
  </svg>`,
  
  hypesquad_events: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L10.04 5.06L16 6.05L12.24 10.24L13.52 16L8 13.26L2.48 16L3.76 10.24L0 6.05L5.96 5.06L8 0Z" fill="url(#hypesquad-gradient)"/>
    <defs>
      <linearGradient id="hypesquad-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#9C84EF"/>
        <stop offset="100%" stop-color="#FF73FA"/>
      </linearGradient>
    </defs>
  </svg>`,
  
  bug_hunter_level_1: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L12 4L16 2L14 6L16 8L12 12L8 16L4 12L0 14L2 10L0 8L4 4L8 0Z" fill="#3BA55C"/>
    <path d="M8 4L10 6L6 10L4 8L8 4Z" fill="white"/>
  </svg>`,
  
  hypesquad_bravery: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L10.04 5.06L16 6.05L12.24 10.24L13.52 16L8 13.26L2.48 16L3.76 10.24L0 6.05L5.96 5.06L8 0Z" fill="#9C84EF"/>
  </svg>`,
  
  hypesquad_brilliance: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L10.04 5.06L16 6.05L12.24 10.24L13.52 16L8 13.26L2.48 16L3.76 10.24L0 6.05L5.96 5.06L8 0Z" fill="#F47FFF"/>
  </svg>`,
  
  hypesquad_balance: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L10.04 5.06L16 6.05L12.24 10.24L13.52 16L8 13.26L2.48 16L3.76 10.24L0 6.05L5.96 5.06L8 0Z" fill="#45DDC0"/>
  </svg>`,
  
  early_supporter: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M13.6572 2.3999C13.21 2.1999 12.73 2.0599 12.24 1.9999C12.1827 2.0926 12.1154 2.2267 12.0681 2.3299C11.5481 2.2599 11.0381 2.2599 10.5281 2.3299C10.4808 2.2267 10.4135 2.0926 10.3462 1.9999C9.85619 2.0599 9.37619 2.1999 8.92899 2.3999C8.01432 3.7332 7.79099 5.0332 7.90099 6.3065C8.61099 6.8065 9.29099 7.0932 9.95099 7.2865C10.1243 7.0532 10.2776 6.8065 10.411 6.5399C10.1743 6.4465 9.95099 6.3332 9.73766 6.1999C9.79099 6.1599 9.84433 6.1199 9.89766 6.0799C10.791 6.4999 11.761 6.4999 12.641 6.0799C12.6943 6.1199 12.7476 6.1599 12.801 6.1999C12.5876 6.3332 12.3643 6.4465 12.1276 6.5399C12.261 6.8065 12.4143 7.0532 12.5876 7.2865C13.2476 7.0932 13.9276 6.8065 14.6376 6.3065C14.7676 4.8532 14.4043 3.5732 13.6572 2.3999ZM10.6176 5.4399C10.3576 5.4399 10.1376 5.1999 10.1376 4.9199C10.1376 4.6399 10.3476 4.3999 10.6176 4.3999C10.8876 4.3999 11.1076 4.6399 11.0976 4.9199C11.0976 5.1999 10.8876 5.4399 10.6176 5.4399ZM11.921 5.4399C11.661 5.4399 11.441 5.1999 11.441 4.9199C11.441 4.6399 11.651 4.3999 11.921 4.3999C12.191 4.3999 12.411 4.6399 12.401 4.9199C12.401 5.1999 12.191 5.4399 11.921 5.4399Z" fill="#5865F2"/>
  </svg>`,
  
  bug_hunter_level_2: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0L12 4L16 2L14 6L16 8L12 12L8 16L4 12L0 14L2 10L0 8L4 4L8 0Z" fill="#F1C40F"/>
    <path d="M8 4L10 6L6 10L4 8L8 4Z" fill="white"/>
  </svg>`,
  
  early_verified_bot_developer: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 2.5c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm4.5 9.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-9 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" fill="#5865F2"/>
    <circle cx="8" cy="5.5" r="1.5" fill="white"/>
  </svg>`,
  
  discord_certified_moderator: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <rect width="16" height="16" rx="3" fill="#2ECC71"/>
    <path d="M5 8L7 10L11 6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,
  
  bot_http_interactions: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <rect width="16" height="16" rx="3" fill="#3498DB"/>
    <path d="M8 4V12M4 8H12" stroke="white" stroke-width="2" stroke-linecap="round"/>
  </svg>`,
  
  active_developer: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <rect width="16" height="16" rx="3" fill="#23A55A"/>
    <path d="M4 8L7 11L12 5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,
  
  // Legacy support
  'Early Supporter': `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M13.6572 2.3999C13.21 2.1999 12.73 2.0599 12.24 1.9999C12.1827 2.0926 12.1154 2.2267 12.0681 2.3299C11.5481 2.2599 11.0381 2.2599 10.5281 2.3299C10.4808 2.2267 10.4135 2.0926 10.3462 1.9999C9.85619 2.0599 9.37619 2.1999 8.92899 2.3999C8.01432 3.7332 7.79099 5.0332 7.90099 6.3065C8.61099 6.8065 9.29099 7.0932 9.95099 7.2865C10.1243 7.0532 10.2776 6.8065 10.411 6.5399C10.1743 6.4465 9.95099 6.3332 9.73766 6.1999C9.79099 6.1599 9.84433 6.1199 9.89766 6.0799C10.791 6.4999 11.761 6.4999 12.641 6.0799C12.6943 6.1199 12.7476 6.1599 12.801 6.1999C12.5876 6.3332 12.3643 6.4465 12.1276 6.5399C12.261 6.8065 12.4143 7.0532 12.5876 7.2865C13.2476 7.0932 13.9276 6.8065 14.6376 6.3065C14.7676 4.8532 14.4043 3.5732 13.6572 2.3999ZM10.6176 5.4399C10.3576 5.4399 10.1376 5.1999 10.1376 4.9199C10.1376 4.6399 10.3476 4.3999 10.6176 4.3999C10.8876 4.3999 11.1076 4.6399 11.0976 4.9199C11.0976 5.1999 10.8876 5.4399 10.6176 5.4399ZM11.921 5.4399C11.661 5.4399 11.441 5.1999 11.441 4.9199C11.441 4.6399 11.651 4.3999 11.921 4.3999C12.191 4.3999 12.411 4.6399 12.401 4.9199C12.401 5.1999 12.191 5.4399 11.921 5.4399Z" fill="#5865F2"/>
  </svg>`,
  
  'Active Developer': `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <rect width="16" height="16" rx="3" fill="#23A55A"/>
    <path d="M4 8L7 11L12 5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,
  
  'Discord Nitro': `<svg width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 2.5c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm4.5 9.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-9 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" fill="#5865F2"/>
    <circle cx="8" cy="5.5" r="1.5" fill="white"/>
    <circle cx="3.5" cy="11" r="0.5" fill="white"/>
    <circle cx="12.5" cy="11" r="0.5" fill="white"/>
  </svg>`
};

// Discord Badge Flags - Official Discord public flags mapping
export const DISCORD_BADGE_FLAGS = {
  STAFF: 1 << 0,                    // 1
  PARTNER: 1 << 1,                  // 2
  HYPESQUAD_EVENTS: 1 << 2,         // 4
  BUG_HUNTER_LEVEL_1: 1 << 3,       // 8
  HYPESQUAD_BRAVERY: 1 << 6,        // 64
  HYPESQUAD_BRILLIANCE: 1 << 7,     // 128
  HYPESQUAD_BALANCE: 1 << 8,        // 256
  EARLY_SUPPORTER: 1 << 9,          // 512
  TEAM_USER: 1 << 10,               // 1024
  BUG_HUNTER_LEVEL_2: 1 << 14,      // 16384
  VERIFIED_BOT: 1 << 16,            // 65536
  VERIFIED_DEVELOPER: 1 << 17,      // 131072
  CERTIFIED_MODERATOR: 1 << 18,     // 262144
  BOT_HTTP_INTERACTIONS: 1 << 19,   // 524288
  ACTIVE_DEVELOPER: 1 << 22,        // 4194304
};

// Badge name to flag mapping
export const BADGE_FLAG_MAP = {
  "Discord Staff": DISCORD_BADGE_FLAGS.STAFF,
  "Discord Partner": DISCORD_BADGE_FLAGS.PARTNER,
  "HypeSquad Events": DISCORD_BADGE_FLAGS.HYPESQUAD_EVENTS,
  "Bug Hunter Level 1": DISCORD_BADGE_FLAGS.BUG_HUNTER_LEVEL_1,
  "HypeSquad Bravery": DISCORD_BADGE_FLAGS.HYPESQUAD_BRAVERY,
  "HypeSquad Brilliance": DISCORD_BADGE_FLAGS.HYPESQUAD_BRILLIANCE,
  "HypeSquad Balance": DISCORD_BADGE_FLAGS.HYPESQUAD_BALANCE,
  "Early Supporter": DISCORD_BADGE_FLAGS.EARLY_SUPPORTER,
  "Bug Hunter Level 2": DISCORD_BADGE_FLAGS.BUG_HUNTER_LEVEL_2,
  "Verified Bot Developer": DISCORD_BADGE_FLAGS.VERIFIED_DEVELOPER,
  "Certified Moderator": DISCORD_BADGE_FLAGS.CERTIFIED_MODERATOR,
  "Bot HTTP Interactions": DISCORD_BADGE_FLAGS.BOT_HTTP_INTERACTIONS,
  "Active Developer": DISCORD_BADGE_FLAGS.ACTIVE_DEVELOPER,
};

// Function to get badges from public flags
export const getBadgesFromFlags = (publicFlags: number): string[] => {
  return Object.entries(BADGE_FLAG_MAP)
    .filter(([_, flag]) => (publicFlags & flag) === flag)
    .map(([name]) => name);
};

// Discord Badge Icons - Using mezotv/discord-badges for correct SVG icons
export const getBadgeIcon = (badgeName: string): string => {
  // Official Discord badge SVG URLs from mezotv/discord-badges repo
  const badgeIconURLs: { [key: string]: string } = {
    // Full names (from frontend)
    "Discord Staff": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordstaff.svg",
    "Discord Partner": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordpartner.svg", 
    "HypeSquad Events": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadevents.svg",
    "HypeSquad Bravery": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadbravery.svg",
    "HypeSquad Brilliance": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadbrilliance.svg", 
    "HypeSquad Balance": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadbalance.svg",
    "Bug Hunter Level 1": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordbughunter1.svg",
    "Bug Hunter Level 2": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordbughunter2.svg",
    "Early Supporter": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordearlysupporter.svg",
    "Active Developer": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/activedeveloper.svg",
    "Verified Bot Developer": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordbotdev.svg",
    "Certified Moderator": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordmod.svg",
    "Bot HTTP Interactions": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordstaff.svg",
    "Nitro Classic": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordnitro.svg",
    "Nitro": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordnitro.svg",
    
    // Backend snake_case names (from API)
    "discord_staff": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordstaff.svg",
    "discord_partner": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordpartner.svg", 
    "hypesquad_events": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadevents.svg",
    "hypesquad_bravery": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadbravery.svg",
    "hypesquad_brilliance": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadbrilliance.svg", 
    "hypesquad_balance": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/hypesquadbalance.svg",
    "bug_hunter_level_1": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordbughunter1.svg",
    "bug_hunter_level_2": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordbughunter2.svg",
    "early_supporter": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordearlysupporter.svg",
    "active_developer": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/activedeveloper.svg",
    "verified_developer": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordbotdev.svg",
    "moderator_alumni": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordmod.svg",
    "bot_http_interactions": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordstaff.svg",
    "nitro_classic": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/nitro.svg",
    "nitro": "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/nitro.svg"
  };
  
  return badgeIconURLs[badgeName] || "https://raw.githubusercontent.com/mezotv/discord-badges/main/assets/discordearlysupporter.svg";
};

// Function to combine badges from public_flags and premium_type
export const getCombinedBadges = (publicFlags: number, premiumType: number | null): string[] => {
  const badges: string[] = [];
  
  // Add badges from public_flags
  const publicBadges = getBadgesFromFlags(publicFlags);
  badges.push(...publicBadges);
  
  // Add Nitro badges based on premium_type
  if (premiumType === 1) {
    badges.push("Nitro Classic");
  } else if (premiumType === 2) {
    badges.push("Nitro");
  }
  
  return badges;
};